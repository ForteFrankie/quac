*** Check input files for unique names
$ quacreduce --map cat --reduce cat foo/bar.txt baz/qux.txt
0
$ quacreduce --map cat --reduce cat foo/bar.txt baz/bar.txt
usage: quacreduce [--map CMD] [--reduce CMD] [--python CLASS] [--pyargs DICT]
                  [--jobdir DIR] [--partitions N] [--sortdir DIR]
                  [--sortmem N] [--update] [-h] [--notimes] [--unittest]
                  [--verbose]
                  FILE [FILE ...]
quacreduce: error: input file basenames must be unique
2
*** Fail if jobdir exists
$ mkdir jobexists
$ quacreduce --map cat --reduce cat --jobdir jobexists foo/bar.txt
usage: quacreduce [--map CMD] [--reduce CMD] [--python CLASS] [--pyargs DICT]
                  [--jobdir DIR] [--partitions N] [--sortdir DIR]
                  [--sortmem N] [--update] [-h] [--notimes] [--unittest]
                  [--verbose]
                  FILE [FILE ...]
quacreduce: error: job dir "jobexists" already exists
2
*** Check that either --python xor --map and --reduce are specified
*** these should succeed
$ quacreduce --map foo --reduce bar --jobdir job2 input.txt
0
*** these should fail
$ quacreduce input.txt
usage: quacreduce [--map CMD] [--reduce CMD] [--python CLASS] [--pyargs DICT]
                  [--jobdir DIR] [--partitions N] [--sortdir DIR]
                  [--sortmem N] [--update] [-h] [--notimes] [--unittest]
                  [--verbose]
                  FILE [FILE ...]
quacreduce: error: --python or --map and --reduce must be specified
2
$ quacreduce --map bar input.txt
usage: quacreduce [--map CMD] [--reduce CMD] [--python CLASS] [--pyargs DICT]
                  [--jobdir DIR] [--partitions N] [--sortdir DIR]
                  [--sortmem N] [--update] [-h] [--notimes] [--unittest]
                  [--verbose]
                  FILE [FILE ...]
quacreduce: error: --map and --reduce must both be specified if one is
2
$ quacreduce --reduce bar input.txt
usage: quacreduce [--map CMD] [--reduce CMD] [--python CLASS] [--pyargs DICT]
                  [--jobdir DIR] [--partitions N] [--sortdir DIR]
                  [--sortmem N] [--update] [-h] [--notimes] [--unittest]
                  [--verbose]
                  FILE [FILE ...]
quacreduce: error: --map and --reduce must both be specified if one is
2
$ quacreduce --python foo --map bar input.txt
usage: quacreduce [--map CMD] [--reduce CMD] [--python CLASS] [--pyargs DICT]
                  [--jobdir DIR] [--partitions N] [--sortdir DIR]
                  [--sortmem N] [--update] [-h] [--notimes] [--unittest]
                  [--verbose]
                  FILE [FILE ...]
quacreduce: error: --python cannot be specified with --map and/or --reduce
2
$ quacreduce --python foo --reduce bar input.txt
usage: quacreduce [--map CMD] [--reduce CMD] [--python CLASS] [--pyargs DICT]
                  [--jobdir DIR] [--partitions N] [--sortdir DIR]
                  [--sortmem N] [--update] [-h] [--notimes] [--unittest]
                  [--verbose]
                  FILE [FILE ...]
quacreduce: error: --python cannot be specified with --map and/or --reduce
2
$ quacreduce --python foo --map bar --reduce baz input.txt
usage: quacreduce [--map CMD] [--reduce CMD] [--python CLASS] [--pyargs DICT]
                  [--jobdir DIR] [--partitions N] [--sortdir DIR]
                  [--sortmem N] [--update] [-h] [--notimes] [--unittest]
                  [--verbose]
                  FILE [FILE ...]
quacreduce: error: --python cannot be specified with --map and/or --reduce
2
